---
title: "Status Report"
author: "Kevin Gilds, MPA"
date: '`r Sys.Date()`'
output:
  
  pdf_document:
    toc: no
---
Run time:
```{r status_library, echo=FALSE}
library(pander)
```


```{r system_time, echo=FALSE}
pander(Sys.time())
```


# Survey Data Entry Status
```{r echo=FALSE, message=FALSE, warning= FALSE}
library(sqldf)
library(dplyr)
library(dplyr)
library(pander)
library(ggplot2)


setwd("C:/Users/kevin/Dropbox/GetReal/Data/sqlite")

getReal_db<- dbConnect(SQLite(), dbname="outcome_history.sqlite")


```

```{r pre_student, echo=FALSE, message=FALSE, warning=FALSE}


### Make connection with database
pre_girl <- dbReadTable(getReal_db, "girl_pre_1617")

###Select the neeeded data for data entry status update
pre_girl <- select(pre_girl, council)
###Create and add column for status update



pre_girl$dataSource <-"Pre-Student"

```


```{r post_girl, echo=FALSE}

###Post Girl

post_girl <-dbReadTable(getReal_db, "girl_post_1617") #read table

post_girl <- post_girl %>%
    select(council) %>%  #select variables
    mutate("dataSource" = "Post Student") #add new column


```

```{r pre_parent, echo=FALSE}

### Make connection with database
pre_parent <-dbReadTable(getReal_db,"pre_parent_1617")
###Select the neeeded data for data entry status update
pre_parent <- select(pre_parent,council)
###Create and add column for status update
pre_parent$dataSource <- "Pre-Parent"


```



```{r post_parent, echo=FALSE}

###Post Parent

post_parent <-dbReadTable(getReal_db, "post_parent_1617") #read table 

post_parent <- post_parent %>%
    select(council) %>%  #select columns
    mutate("dataSource"= "Post Parent") #add colummns



```

```{r pre_teacher, echo=FALSE}
### Make connection with database
pre_teacher <-dbReadTable(getReal_db, "pre_teacher_1617")
###Select the neeeded data for data entry status update
pre_teacher <-select(pre_teacher,council)
###Create and add column for status update
pre_teacher$dataSource <- "Pre Teacher"




```

```{r post_teacher, echo=FALSE}

#Post Teacher

post_teacher <-dbReadTable(getReal_db, "post_teacher_1617") #read table from database

post_teacher <- post_teacher %>%
    select(council) %>%
    mutate("dataSource"= "Post Teacher")


```


```{r grades_q1, echo=FALSE}

q1 <- dbReadTable(getReal_db, "Q1_attendance_1617")

q1 <- q1 %>%
    select(council) %>%
    mutate("dataSource" = "Q1")



```



```{r counts, echo=FALSE}
##### Geyset counts of Pre and Post Surveys
girl <- nrow(pre_girl) + nrow(post_girl)

#class(girl)
parent <- nrow(pre_parent) + nrow(post_parent)
teacher <- nrow(pre_teacher) + nrow(post_teacher)

```

```{r total_survey_count, echo=FALSE}
Data_Entry<- c(girl, parent, teacher)

Data_Source <- c("Student", "Parent", "Teacher")

total_survey_count <- data.frame(Data_Source, Data_Entry)


```


```{r survey_status, echo=FALSE}
### Add the teacher to binding for status report

girl_parent <- rbind(pre_girl,pre_parent)



survey_status <- rbind(girl_parent, pre_teacher) #add teacher survey

survey_status <- rbind(survey_status, q1) #add q1


```




```{r survey_stats, echo=FALSE}

survey_status3 <- with(survey_status,table(dataSource))

survey_status3 <- addmargins(survey_status3)

pander(survey_status3)



```

# Data Entry Status by Council
```{r council, survey_status, echo=FALSE}

survey_status2 <-with(survey_status,table(council, dataSource))

survey_status2 <- addmargins(survey_status2)

pander(survey_status2)


```



# Duplicate Entries

```{r student_dupes, echo=FALSE}

student_dupes <- dbReadTable(getReal_db, "girl_pre_duplicates_1617")

student_dupes <- student_dupes %>%
    select(council) %>%
    mutate("data_Source" = "Student_dupes")

```


```{r parent_dupes, echo=FALSE}

parent_dupes <- dbReadTable(getReal_db, "pre_parent_duplicate_1617")

parent_dupes <- parent_dupes %>%
    select(council) %>%
    mutate("data_Source" = "Parent_dupes")

```


```{r teacher_dupes, echo=FALSE}

teacher_dupes <- dbReadTable(getReal_db, "pre_teacher_dups_1617")

teacher_dupes <- teacher_dupes %>% 
    select(council) %>%
    mutate("data_Source" = "Teacher_dupes")


```


```{r q1_dupes}

q1_dupes <- dbReadTable(getReal_db, "Q1_duplicates_1617")

q1_dupes <- q1_dupes %>%
    select(council) %>%
    mutate("data_Source" = "Q1_dupes")


```


```{r bind_dupes, echo=FALSE}

student_d_parent_d <- rbind(student_dupes, parent_dupes)



dupe_status <- rbind(student_d_parent_d, teacher_dupes)


dupe_status <-rbind(dupe_status, q1_dupes)

```


```{r dupe_status, echo=FALSE}

dupe_status_r <-with(dupe_status,table(data_Source))

dupe_status_r <- addmargins(dupe_status_r)

pander(dupe_status_r)

```



```{r dupe_status_council, echo=FALSE}

dupe_status_c <-with(dupe_status,table(council,data_Source))

dupe_status_c <- addmargins(dupe_status_c)

pander(dupe_status_c)

```




