---
title: "matched_survey_history"
author: "Kevin Gilds, MPA"
date: "September 1, 2016"
output: html_document
---

```{r echo=FALSE, warning=FALSE, message=FALSE}


library(sqldf)
setwd("C:/Users/kevin/Dropbox/GetReal/Data/sqlite")

getReal_2016db<- dbConnect(SQLite(), dbname="outcome_history.sqlite")

library(DT)
library(getREAL)
library(dplyr)
library(pander)
library(ggplot2)
library(effsize)
library(knitr)

```


```{r read_databases}
setwd("C:/Users/kevin/Dropbox/GetReal/Data/sqlite")

hr <-dbReadTable(getReal_2016db,"hr_history")

ae <-dbReadTable(getReal_2016db,"ae_history")

am <-dbReadTable(getReal_2016db,"am_history")


```


```{r}
## Change council names to be consistent wiht how they displayed with the surveys
hr$council <-sub("Girl Scouts of the Gateway Council", "Gateway Council", fixed=TRUE, hr$council)

hr$council <-sub("Girl Scouts of Citrus Council", "Citrus Council", fixed=TRUE, hr$council)

hr$council <-sub("Girl Scouts of Southeast Florida", "Southeast Council", fixed=TRUE, hr$council)

hr$council <-sub("Southeast Council, Inc", "Southeast Council", fixed=TRUE, hr$council)

hr$council <-sub("Southeast Council.", "Southeast Council", fixed=TRUE, hr$council)

hr$council <-sub("Girl Scout Council of Tropical Florida", "Tropical Council", fixed = TRUE, hr$council)

hr$council <-sub("Girl Scouts of West Central Florida", "West Central Council", fixed = TRUE, hr$council)

hr$council <-sub("Girl Scout Council of the Panhandle", "Panhandle Council", fixed = TRUE, hr$council)

hr$council <-sub("Girl Scouts of Gulfcoast Florida Inc.",  "Gulfcoast Council", fixed = TRUE, hr$council)

```

```{r}
council_status <- with(hr,table(council, Year_Id))

pander(council_status)

```



# Life Skills Outcome

## Healthy Relationships Life Skills

```{r}
council_hr <- hr %>%
    group_by(council, Year_Id)


head(council_hr)

council_hr_pre <-summarise(council_hr, Pre =mean(Pre))
          
#daily <- group_by(flights, year, month, day)
#(per_day   <- summarise(daily, flights = n()))
```

```{r}
achieved_hr <- with(council_hr, table(council, Pre >= 4.45))

achieved_hr

achieved_hr_p <-prop.table(achieved_hr,1)

achieved_hr_p<-round(achieved_hr_p*100,2)

pander(achieved_hr_p)
```



### Pre Surveys

* M1  Membership Year 2013-2014

```{r}

datatable(council_hr_pre)


```

